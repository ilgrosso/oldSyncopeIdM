#summary How to get started with Syncope.
#labels Phase-Deploy,Featured

= Introduction =

This document describes how to get started with Syncope. This includes building the core and the console. This page helps you get both web applications up and running with your own project as quickly as possible.

The preferred way to start a Syncope project is to use the archetype to generate a Maven project. You need to have Maven (version 2.2.1 or higher) installed. This page also assumes that you have some basic knowledge on how to use Maven.

== Creating a project ==

Maven archetypes are templates of projects. Maven can generate a new project from such a template. For a project using Syncope, you need the website archetype. In the folder in which the new project folder should be created, type the command shown below. On Windows, run the command on a single line and leave out the line continuation characters ('\').

{{{
mvn archetype:generate \
    -DarchetypeGroupId=org.syncope \
    -DarchetypeArtifactId=syncope-archetype \
    -DarchetypeVersion=0.5.5
}}}

You may want to change the archetype version: change the archetypeVersion to that of the newest release or tag of the archetype project:
  * stable releases can be found at http://repo1.maven.org/maven2/org/syncope/syncope-archetype/
  * snapshot releases can be found at https://oss.sonatype.org/content/groups/public/org/syncope/syncope-archetype/


The archetype is configured with default values for all properties required by the archetype. If you want to customize any of these property values, type 'n' when prompted for confirmation.

You will be asked for:

  1. the groupId, (something like 'com.mycompany')
  1. the artifactId (something like 'myproject')
  1. the version number (you can use the default, it is good practice to have 'SNAPSHOT' in the version number during development and the maven release plugin makes use of that string. But ensure to comply to the desired numbering scheme for your project).
  1. the package name. This is the java package name. A folder structure according to this name will be generated automatically. Use the default, which is equal to the groupId.

Maven will create a project for you (in a newly created directory named after the value of the artifactId property you specified ) containing two subprojects:

  1. core - a pre-configured RESTful server, with JPA persistence
  1. console - a web interface for dealing with the core

Now build your project using the following command in the root folder of your project:

{{{
mvn clean package
}}}

This will produce two WAR files:

  * core/target/{artifactId}-{version}.war
  * console/target/console-{version}.war 

You can now run your project in the built-in Tomcat servlet container.

== Running a project ==

=== Embedded ===

For a fast development cycle, you can run both the core/console from the command lines using Tomcat and the Cargo maven plug-in.

To run the core and the console, run the following command from the console directory:

{{{
mvn cargo:start
}}}

The console is now available at http://localhost:9080/syncope-console/; the base URL for RESTful services is at http://localhost:9080/syncope/rest.

To test out your fresh installation, go to http://localhost:9080/syncope-console/ and log in with credentials 'admin' / 'password'.

=== Real-world ===

For a real-world deployment, you need first to define which DBMS you are using: in order to configure that, you need to create a file called `persistence.properties` under `core/src/main/resources`. You can take the following as reference.

==== PostgreSQL ====
{{{
hibernate.connection.driver_class=org.postgresql.Driver
hibernate.connection.url=jdbc:postgresql://localhost:5432/syncope
hibernate.connection.username=syncope
hibernate.connection.password=syncope
hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
dbUnitDataTypeFactory=org.dbunit.ext.postgresql.PostgresqlDataTypeFactory
}}}
==== Oracle 10g ====
{{{
hibernate.connection.driver_class=oracle.jdbc.driver.OracleDriver
hibernate.connection.url=jdbc:oracle:thin:@localhost:1521:orcl
hibernate.connection.username=syncope
hibernate.connection.password=syncope
hibernate.dialect=org.hibernate.dialect.Oracle10gDialect
dbUnitDataTypeFactory=org.dbunit.ext.oracle.Oracle10DataTypeFactory
database.schema=SYNCOPE
}}}

You will also need to define a JDBC Datasource - called `syncopeDataSource` - in your servlet container's configuration, and provide the needed JDBC driver.

Then, you may want to setup some default content to be loaded on your database upon schema creation: for this you need to create a file called `content.xml` under `core/src/main/resources`; take [https://syncope.googlecode.com/svn/trunk/core/src/main/resources/content.xml this] as reference.

At this point you can build your core module by issuing
{{{
mvn clean package
}}}
under `core` subdirectory; this will generate a WAR file that you can deploy on your servlet container.

Now create a file called `configuration.properties` under `console/src/main/resources` like as the following:
{{{
baseURL=http://localhost:9080/syncope/rest/
}}}
where `baseURL` defines the access URL of the servlet container in which you've deployed the core, as reported above.
<u>Note that core and console WARs can be deployed in separate containers.</u>

Finally you can build your console module by issuing
{{{
mvn clean package
}}}
under `console` subdirectory; this will generate a WAR file that you can deploy on your servlet container.